ant.importBuild('build.xml')


task git(type: Exec) {
    workingDir 'npc.assets'
    commandLine 'git', 'pull'
}

task npm(type: Exec, dependsOn: git) {
    workingDir 'npc.assets'
    commandLine 'npm', 'install'
}

task grunt(type: Exec, dependsOn: npm) {
    workingDir 'npc.assets'
    commandLine 'grunt', 'build'
}

task createLink(dependsOn: grunt) << {  
   ant.symlink(resource: "npc.assets/dist", link: "assets")
}

task prep(dependsOn: createLink) << {
    println "All ready"
}
